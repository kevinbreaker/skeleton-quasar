(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{1319:function(t,e,i){"use strict";var n=i("ff9d"),r=i.n(n);r.a},b65f:function(t){t.exports=JSON.parse('{"status":"success","data":{"token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9sb2NhbGhvc3Q6ODA0MFwvYXBpXC92MVwvYXV0aFwvbG9naW4iLCJpYXQiOjE1NzkyMjIxMTgsImV4cCI6MTU3OTI1MDkxOCwibmJmIjoxNTc5MjIyMTE4LCJqdGkiOiJGckdWN0FUVk84OGFsR1ZwIiwic3ViIjo0MSwicHJ2IjoiMGY5NWFkN2NmNGI2MjdkMjE3YWMxNjk2NDJjZjNhMDQ4YWExZjJmOCIsInNlc3Npb24iOiIxYjBhYTZmMC1jZTYwLTRmYmUtYmJlYy04MDM1ODA3ZDYzZDkifQ.plaDPhEJr7eOlnbr9eTCBrxeLf4pCfZnkGzwecg1A2s","token_type":"bearer","token_expires_at":1579250918,"session":"1b0aa6f0-ce60-4fbe-bbec-8035807d63d9"},"meta":[]}')},b79a:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"AuthIndex flex row items-center justify-center",class:{started:t.started}},[i("q-card",{staticClass:"AuthIndex__card"},[i("q-card-section",{staticClass:"text-center bg-primary"},[i("div",[i("img",{staticClass:"AuthIndex__logo",attrs:{alt:"logo",src:"statics/logo-horizontal.png"}})])]),i("q-separator"),i("q-card-section",[i("form",{on:{submit:function(e){return e.preventDefault(),t.attempt(e)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 q-pa-sm"},[i("q-input",{attrs:{label:t.$lang("auth.login.login"),type:"email",outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"mail"}})]},proxy:!0}]),model:{value:t.record.login,callback:function(e){t.$set(t.record,"login",e)},expression:"record.login"}})],1),i("div",{staticClass:"col-12 q-pa-sm q-pb-md"},[i("q-input",{attrs:{label:t.$lang("auth.login.password"),type:t.isPassword?"password":"text",outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:t.record.password?"vpn_key":"lock"}})]},proxy:!0},{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPassword?"visibility_off":"visibility"},on:{click:function(e){t.isPassword=!t.isPassword}}})]},proxy:!0}]),model:{value:t.record.password,callback:function(e){t.$set(t.record,"password",e)},expression:"record.password"}})],1)]),i("hr"),i("div",{staticClass:"q-pa-sm"},[i("q-btn",{staticClass:"AuthIndex__button full-width",attrs:{color:"primary",label:t.$lang("auth.login.signIn"),type:"submit",loading:t.loading}})],1)])])],1)],1)},r=[],s=i("b5ae"),o=(i("ac6a"),i("cadf"),i("456d"),i("551c"),i("06db"),i("097d"),i("f751"),i("fc74")),a=i.n(o),c=i("59a1"),u=i.n(c),d=i("6430"),l=i.n(d),p=i("ffe3"),h=i.n(p),f=i("2b8e"),m=i.n(f),v=i("37d9"),g=i.n(v),w=i("c47a"),b=i.n(w),y=i("e0f3"),k=i("2073"),$=function(t){function e(){var t,i;a()(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=l()(this,(t=h()(e)).call.apply(t,[this].concat(r))),b()(m()(i),"path",""),i}return g()(e,t),u()(e,[{key:"login",value:function(t,e){return Object(k["g"])(i("b65f"))}},{key:"logout",value:function(){return this.get("/api/v1/auth/logout")}},{key:"register",value:function(t){return this.post("/api/v1/auth/register",t)}},{key:"remember",value:function(t){return this.post("/api/v1/auth/remember",{login:t})}},{key:"confirm",value:function(t,e,i){return this.post("/api/v1/auth/confirm",Object.assign(i,{password:t,confirm:e}))}},{key:"activate",value:function(t){return this.get("/api/v1/auth/activate/".concat(t))}},{key:"reset",value:function(t){return this.get("/api/v1/auth/reset/".concat(t))}},{key:"state",value:function(t){return this.get("/api/v1/auth/state/".concat(t))}},{key:"info",value:function(t,e){return this.post("/api/v1/auth/info/".concat(t),{payload:e})}}],[{key:"instance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.__instance||(this.__instance=new this(t,e)),this.__instance}}]),e}(y["a"]),q={service:$.build(),data:function(){return{record:{},development:{},loading:!1}},methods:{attemptFail:function(){console.warn(">>> override attemptFail")},attempting:function(){console.warn(">>> override attempting")},attemptSuccess:function(t){console.warn(">>> override attemptSuccess")},attemptError:function(){console.warn(">>> override attemptError")},attempt:function(){var t=this;if(this.$v.$touch(),this.$v.$error)this.attemptFail();else{this.setLoading(!0);try{this.attempting().then(this.attemptSuccess).catch(this.attemptError).finally((function(){return t.setLoading(!1)}))}catch(e){this.setLoading(!1),console.error("You need implement 'attempting' and return a promise")}}},setLoading:function(t){this.loading=!!t},follow:function(t){this.$route.query.redirect&&(t=this.$route.query.redirect),this.$browse(t)},fillRecordDevelopment:function(){var t=this;Object.keys(this.development).forEach((function(e){t.record[e]=t.development[e]}))}},mounted:function(){!this.$dev&&this.development&&this.record||this.fillRecordDevelopment()}},x=i("3923"),C=i("a389"),I={name:"AuthIndex",mixins:[q],data:function(){return{started:!1,isPassword:!0,record:{login:"guest@mail.io",password:"1qa2ws3ed"}}},validations:function(){return{record:{login:{required:s["required"]},password:{required:s["required"]}}}},methods:{attempting:function(){return this.$q.loading.show(),this.$service.login(this.record.login,this.record.password)},attemptSuccess:function(t){var e=this,i=t.data;this.$store.dispatch("auth/login",i.token).then(this.attemptFetchUser).catch((function(){return e.$q.loading.hide()}))},attemptError:function(){this.$q.loading.hide(),this.$message.error(this.$lang("auth.login.error"))},attemptFetchUser:function(){Object(C["a"])().then(this.attemptSetUser)},attemptSetUser:function(t){this.$store.dispatch("auth/updateUser",t).then(this.openDashboard)},openDashboard:function(){var t=this,e=x["a"];this.$route.query.current&&(e=this.$route.query.current),this.$browse(e),window.setTimeout((function(){return t.$q.loading.hide()}),2e3)}},created:function(){var t=this;if(this.$store.getters["app/getClipboard"]){var e=this.$store.getters["app/getClipboard"],i=function(){e.login&&(t.record.login=e.login),e.password&&(t.record.password=e.password)};this.$store.dispatch("app/clearClipboard").then(i)}},mounted:function(){var t=this;window.setTimeout((function(){t.started=!0}),1e3)}},_=I,j=(i("1319"),i("2877")),O=Object(j["a"])(_,n,r,!1,null,null,null);e["default"]=O.exports},ff9d:function(t,e,i){}}]);